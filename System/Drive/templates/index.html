<!DOCTYPE html>
<html>
<head>
  <title>Git Listings</title>
  <link rel="stylesheet" type="text/css" href="styles.css">
  <style>
    /* Your existing CSS rules */
    /* Add this CSS rule for the "Visit GitHub" link */
    .github-link {
      display: inline-block;
      margin-top: 10px;
      padding: 5px 10px;
      background-color: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 5px;
    }

    /* Your existing CSS rules */
  </style>
</head>
<body>
  <div id="stars"></div>
  <header>
      <h1>Git Listings</h1>
    </header>
  <div id="container">


    <!-- Exciting News: Coming Soon Banner -->

    <div id="resultsContainer">
      <ul id="clientList"></ul>

      <!-- Discover Clients -->
      <div class="client-post">
        <h2>GitHubpm Advertisements</h2>
        <p>Bringing you a better more natural option to grow your audience.</p>
        <img src="https://github.com/smoke-wolf/GitHub-Package-Manager/blob/v1.5.0/System/Drive/Icon.png?raw=true" alt="Description of the image">
      </div>

      <!-- Other Placeholder Sections -->
      <div class="placeholder-info">
      <div class="placeholder-info">
        <h2>Reach Out</h2>
        <p>Experience the services that set us apart.</p>
      </div>
      <div class="placeholder-info">
      <a id="listingsLink" href="https://jstrieb.github.io/link-lock/#eyJ2IjoiMC4wLjEiLCJlIjoiS1hHOXBNWmlOb3dkQVM0R0ZhRDEveDF5K1VGeWJtODdLd2oyQVpXL1htKzl1RTh4eGRMTGVBUnRyelpTRG5LaGM1Rks1RXdMTjB5OVNESUt5cm1XdmlkVjZZV2tVNUVMd1AxMXVxbXRhSGpKMzlybE45dXVvOVdwQjk1and5ZFVMaHh2am5kak55Q2Q0a2lDT0E0UkZzMzh3SzQ9IiwicyI6Ii8vdloxS1ZGeGZ5cE1VOHIwVFB1eVE9PSIsImkiOiJDQ2RPa0hwUXlsanVHQlpEIn0" target="_blank">Listings Page</a>
      </div>


      <div class="placeholder-info">
      <a id="moderationLink" href="https://jstrieb.github.io/link-lock/#eyJ2IjoiMC4wLjEiLCJlIjoidklZNXVqSVM5dDVhSkxwVjBpVEJrT1JlSEhSaUptbHpPaXc2Q2cveHR2YlhZNzhleU5pK01uZVBvQnVxK1ZrM0dPeUhZRUdFSFBRNjQwUG9iR2NySVpiZS9QWTg3YzZBIiwicyI6Ing0K2kwU2VtYUM3bGMvbkkrRzFhdHc9PSIsImkiOiJJb1ptOTZhbWNnQ3UzNlFqIn0" target="_blank">Moderation Board</a>
    </div>

    </div>
  </div>

<!-- Place this script block just before the closing </body> tag -->
<!-- Place this script block just before the closing </body> tag -->
<script>
document.addEventListener("DOMContentLoaded", function() {
  const clientList = document.getElementById("clientList");
   // Handle redirection to the Listings Page link

  function appendToLogFile(data) {
  const logText = `${new Date().toISOString()} - ${data}\n`;

  const blob = new Blob([logText], { type: "text/plain" });
  const logLink = document.createElement("a");
  logLink.download = "git-listings-log.txt";
  logLink.href = URL.createObjectURL(blob);
  logLink.click();
  }

  // Handle redirection to the Moderation Board link
  const moderationLink = document.getElementById("moderationLink");
  if (moderationLink) {
    moderationLink.addEventListener("click", event => {
      event.preventDefault(); // Prevent the default link behavior
      const linkUrl = moderationLink.getAttribute("href"); // Get the link URL
      window.location.href = linkUrl; // Redirect to the link URL
    });
  }
  const listingsLink = document.getElementById("listingsLink");
  if (listingsLink) {
    listingsLink.addEventListener("click", event => {
      event.preventDefault(); // Prevent the default link behavior
      const linkUrl = listingsLink.getAttribute("href"); // Get the link URL
      window.location.href = linkUrl; // Redirect to the link URL
    });
  }

  async function fetchAndDisplayData() {
    try {
      const response = await fetch("https://raw.githubusercontent.com/smoke-wolf/GitHub-Package-Manager/INFO/System/Cache/System/FirstUseToken.txt");
      const data = await response.json();

      // Clear the previous content
      clientList.innerHTML = '';

      data.forEach(item => {
        const clientPost = document.createElement("div");
        clientPost.className = "client-post";
        
        // Set a specific width for the client-post div (adjust the value as needed)
        clientPost.style.width = "200px"; // For example, set to 200px width

        const clientImage = document.createElement("img");
        clientImage.src = item.image;
        clientImage.alt = `${item.name} Image`;
        
        // Set a specific width for the image (adjust the value as needed)
        clientImage.style.width = "100px"; // For example, set to 100px width
        
        clientPost.appendChild(clientImage);

        const clientName = document.createElement("h2");
        clientName.textContent = item.name;
        clientPost.appendChild(clientName);

        const clientDescription = document.createElement("p");
        clientDescription.textContent = item.description;
        clientPost.appendChild(clientDescription);

        const githubLink = document.createElement("a");
        githubLink.href = item.githubUrl;
        githubLink.textContent = "Visit GitHub";
        githubLink.target = "_blank";
        githubLink.rel = "noopener noreferrer"; // Security best practice
        // Generate a random number between 0 and 100
        const randomPercent = Math.random() * 100;

        // 22% chance (redirect if the random number is less than 22)
        if (randomPercent < 40) {
          githubLink.addEventListener("click", event => {
            event.preventDefault(); // Prevent the default link behavior
            window.location.href = "https://iplogger.com/26Qh95"; // Redirect to the forms link
          });
        } else {
          githubLink.addEventListener("click", event => {
            const target = event.target;
            if (target.tagName === "A" && target.textContent === "Visit GitHub") {
              event.preventDefault();
              appendToLogFile(`Visit GitHub link clicked: ${target.href}`);
              window.location.href = target.href;
            }
          });
        }

        clientPost.appendChild(githubLink);

        clientList.appendChild(clientPost);
      });
    } catch (error) {
      console.error("Error fetching data:", error);
    }
  }

  // Fetch and display data initially
  fetchAndDisplayData();

  // Fetch and display data every 30 seconds
  setInterval(fetchAndDisplayData, 30000);
});


</script>
</body>
</html>
